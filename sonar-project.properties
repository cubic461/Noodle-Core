# SonarQube Configuration for Noodle Project
# This file configures SonarQube analysis for the Noodle codebase

# Project identification
sonar.projectKey=noodle-core
sonar.projectName=Noodle Core
sonar.projectVersion=1.0.0

# Source code locations
sonar.sources=noodle-core/src,src
sonar.tests=tests

# Exclusions
sonar.exclusions=**/migrations/**,**/venv/**,**/env/**,**/.venv/**,**/__pycache__/**,**/node_modules/**,**/build/**,**/dist/**,**/*.egg-info/**,**/.tox/**,**/.pytest_cache/**,**/htmlcov/**,**/.coverage.*,**/coverage.*,**/benchmarks/**,**/.benchmarks/**,**/examples/**,**/tests/**,**/*.pb.go,**/generated/**,**/vendor/**

# Test exclusions
sonar.test.exclusions=**/tests/**,**/test_*.py,**/*_test.py

# Coverage configuration
sonar.python.coverage.reportPaths=coverage.xml
sonar.coverage.exclusions=**/tests/**,**/test_*.py,**/*_test.py,**/migrations/**,**/conftest.py,**/__init__.py

# Python-specific analysis settings
sonar.python.version=3.9,3.10,3.11
sonar.python.pylint.reportPaths=pylint-report.txt
sonar.python.bandit.reportPaths=bandit-report.json

# Code quality thresholds
sonar.qualitygate.wait=true

# Code smell settings
sonar.codeSmell.metric.threshold=blocker=0,critical=0,major=50,minor=100

# Bug settings
sonar.bug.metric.threshold=blocker=0,critical=0,major=5,minor=10

# Vulnerability settings
sonar.vulnerability.metric.threshold=blocker=0,critical=0,major=0,minor=5

# Security hotspot settings
sonar.security.hotspot.metric.threshold=blocker=0,critical=0,major=5,minor=10

# Duplication settings
sonar.cpd.python.minimumTokens=50
sonar.cpd.python.duplications=3

# Size metrics
sonar.scm.provider=git
sonar.scm.forceReloadAll=true

# Encoding
sonar.sourceEncoding=UTF-8

# Analysis parameters
sonar.python.pylint.config=.pylintrc
sonar.python.bandit.configFile=.bandit

# Exclude specific patterns from complexity analysis
sonar.python.xunit.reportPath=pytest-report.xml

# Additional exclusions for specific issues
sonar.issue.ignore.multicriteria=e1,e2,e3,e4
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S1192
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.py
sonar.issue.ignore.multicriteria.e2.ruleKey=python:S1135
sonar.issue.ignore.multicriteria.e2.resourceKey=**/tests/**
sonar.issue.ignore.multicriteria.e3.ruleKey=python:S107
sonar.issue.ignore.multicriteria.e3.resourceKey=**/tests/**
sonar.issue.ignore.multicriteria.e4.ruleKey=python:S1481
sonar.issue.ignore.multicriteria.e4.resourceKey=**/tests/**

# Technical debt
sonar.technicalDebt.hoursInDay=8

# Maintainability settings
sonar.coverage.gap=0.75

# Security settings
sonar.security.hotspots.enabled=true

# Custom rules
sonar.externalIssuesReportPaths=external-issues.json

# Exclude generated code
sonar.exclusions+=**/generated/**,**/*.pb.go,**/*.pb.h,**/*.pb.cc

# Performance settings
sonar.scm.revision=${env.SONAR_SCM_REVISION}
sonar.scm.branch=${env.SONAR_SCM_BRANCH}

# CI/CD integration
sonar.pullrequest.provider=github
sonar.pullrequest.github.repository=${env.GITHUB_REPOSITORY}
sonar.pullrequest.github.token=${env.GITHUB_TOKEN}
sonar.pullrequest.base=${env.GITHUB_BASE_REF}
sonar.pullrequest.branch=${env.GITHUB_HEAD_REF}
sonar.pullrequest.key=${env.GITHUB_REF_NAME}
